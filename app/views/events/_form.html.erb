<%= form_with(model: event, class: "space-y-6") do |form| %>
  <% if event.errors.any? %>
    <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl">
      <div class="flex items-center mb-2">
        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
        </svg>
        <span class="font-medium"><%= pluralize(event.errors.count, "error") %> prohibited this event from being saved:</span>
      </div>
      <ul class="list-disc list-inside text-sm space-y-1">
        <% event.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div>
    <%= form.label :title, class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.text_field :title, 
        class: "w-full px-4 py-3 rounded-xl border #{event.errors[:title].any? ? 'border-red-300 focus:border-red-500 focus:ring-red-200' : 'border-gray-200 focus:border-amber-500 focus:ring-amber-200'} focus:ring-2 transition-all outline-none",
        placeholder: "e.g., Community Iftar at the Park" %>
    <p class="mt-1 text-sm text-gray-500">Give your event a descriptive title</p>
  </div>

  <div>
    <%= form.label :description, class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.text_area :description, 
        rows: 4,
        class: "w-full px-4 py-3 rounded-xl border #{event.errors[:description].any? ? 'border-red-300 focus:border-red-500 focus:ring-red-200' : 'border-gray-200 focus:border-amber-500 focus:ring-amber-200'} focus:ring-2 transition-all outline-none",
        placeholder: "Tell guests what to expect, what to bring, dietary options, etc." %>
  </div>

  <div class="grid md:grid-cols-2 gap-6">
    <div>
      <%= form.label :date, "Date & Time", class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= form.datetime_local_field :date, 
          class: "w-full px-4 py-3 rounded-xl border #{event.errors[:date].any? ? 'border-red-300 focus:border-red-500 focus:ring-red-200' : 'border-gray-200 focus:border-amber-500 focus:ring-amber-200'} focus:ring-2 transition-all outline-none" %>
      <p class="mt-1 text-sm text-gray-500">When will the Iftar take place?</p>
    </div>

    <div>
      <%= form.label :capacity, class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= form.number_field :capacity, 
          min: 1,
          class: "w-full px-4 py-3 rounded-xl border #{event.errors[:capacity].any? ? 'border-red-300 focus:border-red-500 focus:ring-red-200' : 'border-gray-200 focus:border-amber-500 focus:ring-amber-200'} focus:ring-2 transition-all outline-none",
          placeholder: "e.g., 20" %>
      <p class="mt-1 text-sm text-gray-500">Maximum number of guests (leave blank for unlimited)</p>
    </div>
  </div>

  <div>
    <%= form.label :location, class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.text_field :location, 
        class: "w-full px-4 py-3 rounded-xl border #{event.errors[:location].any? ? 'border-red-300 focus:border-red-500 focus:ring-red-200' : 'border-gray-200 focus:border-amber-500 focus:ring-amber-200'} focus:ring-2 transition-all outline-none",
        placeholder: "e.g., 123 Main Street, Community Center" %>
    <p class="mt-1 text-sm text-gray-500">Where will guests meet?</p>
  </div>

  <div>
    <%= form.label :rsvp_closes_before, "RSVP Deadline", class: "block text-sm font-medium text-gray-700 mb-1" %>
    <%= form.select :rsvp_closes_before, 
        Event::RSVP_CLOSE_OPTIONS.map { |label, value| [label, value] },
        { selected: event.rsvp_closes_before },
        class: "w-full px-4 py-3 rounded-xl border border-gray-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 transition-all outline-none bg-white" %>
    <p class="mt-1 text-sm text-gray-500">When should RSVPs close before the event?</p>
  </div>

  <div>
    <label class="block text-sm font-medium text-gray-700 mb-3">Event Banner</label>
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
      <% Event::BANNER_OPTIONS.each do |banner| %>
        <label class="relative cursor-pointer group">
          <%= form.radio_button :banner_image, banner, class: "peer sr-only", checked: (event.banner_image == banner || (event.new_record? && banner == Event::BANNER_OPTIONS.first)) %>
          <div class="rounded-xl overflow-hidden border-4 border-transparent peer-checked:border-amber-500 peer-checked:shadow-lg transition-all relative">
            <%= image_tag banner, class: "w-full h-32 object-cover group-hover:scale-105 transition-transform duration-300" %>
            <div class="absolute inset-0 bg-black/40 opacity-0 peer-checked:opacity-100 flex items-center justify-center transition-opacity">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
              </svg>
            </div>
          </div>
        </label>
      <% end %>
    </div>
    <p class="mt-2 text-sm text-gray-500">Choose a cover image for your event page</p>
  </div>

  <div class="pt-4">
    <%= form.submit event.persisted? ? "Update Event" : "Create Event", 
        class: "w-full sm:w-auto px-8 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl font-semibold hover:from-amber-600 hover:to-orange-600 transition-all shadow-lg hover:shadow-xl cursor-pointer" %>
  </div>
<% end %>
